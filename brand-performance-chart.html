<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brand Performance Across Weeks</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
            overflow-x: hidden;
        }
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 8px 8px 0 0;
        }
        .header h1 {
            margin: 0;
            font-size: 1.8em;
            font-weight: 400;
        }
        .chart-section {
            padding: 20px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 1200px; /* Tall enough for all brands */
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }
        .good { background-color: #27ae60; }
        .ni { background-color: #f39c12; }
        .poor { background-color: #e74c3c; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“Š Brand Performance Across Weeks</h1>
            <p>Horizontal Stacked Bar Chart with Brand Separators</p>
        </div>
        
        <div class="chart-section">
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color good"></div>
                    <span>Good Performance</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color ni"></div>
                    <span>Needs Improvement</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color poor"></div>
                    <span>Poor Performance</span>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="performanceChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Your complete data from the image
        const brandData =  {
            "June": {
                "DVW": {"Good": 621, "NI": 114, "Poor": 0},
                "MRE": {"Good": 150, "NI": 1543, "Poor": 0},
                "RBW": {"Good": 635, "NI": 234, "Poor": 0},
                "SHG": {"Good": 484, "NI": 101, "Poor": 0},
                "WDG": {"Good": 966, "NI": 231, "Poor": 0},
                "HMS": {"Good": 336, "NI": 0, "Poor": 0},
                "MOJ": {"Good": 980, "NI": 310, "Poor": 192},
                "GUY.ca": {"Good": 379, "NI": 35, "Poor": 0},
                "GUY.com": {"Good": 61, "NI": 1548, "Poor": 0},
                "MLY": {"Good": 1782, "NI": 564, "Poor": 6},
                "MRR CA": {"Good": 1111, "NI": 0, "Poor": 0},
                "MRR US": {"Good": 193, "NI": 2927, "Poor": 0},
                "PDS": {"Good": 9, "NI": 543, "Poor": 515},
                "ASV US": {"Good": 846, "NI": 644, "Poor": 0},
                "ASV CA": {"Good": 251, "NI": 0, "Poor": 0},
                "MDG": {"Good": 1757, "NI": 704, "Poor": 0},
                "PLG": {"Good": 139, "NI": 68, "Poor": 0},
                "MRA CA": {"Good": 56, "NI": 212, "Poor": 0},
                "MRA US": {"Good": 1408, "NI": 1356, "Poor": 0},
                "FSP": {"Good": 39, "NI": 1303, "Poor": 0},
                "MRH CA": {"Good": 0, "NI": 0, "Poor": 0},
                "MRH US": {"Good": 0, "NI": 0, "Poor": 0},
                "LAP": {"Good": 0, "NI": 0, "Poor": 0}
            },
            "July": {
                "DVW": {"Good": 744, "NI": 0, "Poor": 0},
                "MRE": {"Good": 101, "NI": 1478, "Poor": 0},
                "RBW": {"Good": 841, "NI": 0, "Poor": 0},
                "SHG": {"Good": 473, "NI": 0, "Poor": 0},
                "WDG": {"Good": 1453, "NI": 0, "Poor": 0},
                "HMS": {"Good": 349, "NI": 0, "Poor": 0},
                "MOJ": {"Good": 1434, "NI": 40, "Poor": 0},
                "GUY.ca": {"Good": 402, "NI": 0, "Poor": 0},
                "GUY.com": {"Good": 1512, "NI": 0, "Poor": 0},
                "MLY": {"Good": 2149, "NI": 236, "Poor": 0},
                "MRR CA": {"Good": 1048, "NI": 0, "Poor": 0},
                "MRR US": {"Good": 1146, "NI": 1197, "Poor": 0},
                "PDS": {"Good": 933, "NI": 0, "Poor": 0},
                "ASV US": {"Good": 1438, "NI": 115, "Poor": 0},
                "ASV CA": {"Good": 228, "NI": 0, "Poor": 0},
                "MDG": {"Good": 2532, "NI": 0, "Poor": 0},
                "PLG": {"Good": 198, "NI": 17, "Poor": 0},
                "MRA CA": {"Good": 257, "NI": 0, "Poor": 0},
                "MRA US": {"Good": 2909, "NI": 341, "Poor": 0},
                "FSP": {"Good": 1343, "NI": 0, "Poor": 0},
                "MRH CA": {"Good": 0, "NI": 222, "Poor": 0},
                "MRH US": {"Good": 73, "NI": 3349, "Poor": 697},
                "LAP": {"Good": 0, "NI": 0, "Poor": 0}
            },
            "Aug": {
                "DVW": {"Good": 854, "NI": 0, "Poor": 0},
                "MRE": {"Good": 573, "NI": 671, "Poor": 0},
                "RBW": {"Good": 940, "NI": 0, "Poor": 0},
                "SHG": {"Good": 491, "NI": 0, "Poor": 0},
                "WDG": {"Good": 1507, "NI": 0, "Poor": 0},
                "HMS": {"Good": 376, "NI": 0, "Poor": 0},
                "MOJ": {"Good": 1584, "NI": 223, "Poor": 0},
                "GUY.ca": {"Good": 414, "NI": 0, "Poor": 0},
                "GUY.com": {"Good": 1372, "NI": 17, "Poor": 0},
                "MLY": {"Good": 2351, "NI": 260, "Poor": 0},
                "MRR CA": {"Good": 1256, "NI": 0, "Poor": 0},
                "MRR US": {"Good": 3058, "NI": 390, "Poor": 0},
                "PDS": {"Good": 957, "NI": 0, "Poor": 0},
                "ASV US": {"Good": 1860, "NI": 106, "Poor": 0},
                "ASV CA": {"Good": 255, "NI": 0, "Poor": 0},
                "MDG": {"Good": 2220, "NI": 319, "Poor": 0},
                "PLG": {"Good": 196, "NI": 0, "Poor": 0},
                "MRA CA": {"Good": 283, "NI": 0, "Poor": 0},
                "MRA US": {"Good": 3206, "NI": 0, "Poor": 0},
                "FSP": {"Good": 1379, "NI": 0, "Poor": 0},
                "MRH CA": {"Good": 242, "NI": 0, "Poor": 0},
                "MRH US": {"Good": 4486, "NI": 19, "Poor": 0},
                "LAP": {"Good": 0, "NI": 0, "Poor": 0}
            },
            "Sept": {
                "DVW": {"Good": 873, "NI": 0, "Poor": 0},
                "MRE": {"Good": 488, "NI": 1000, "Poor": 0},
                "RBW": {"Good": 1024, "NI": 0, "Poor": 0},
                "SHG": {"Good": 575, "NI": 0, "Poor": 0},
                "WDG": {"Good": 1425, "NI": 0, "Poor": 0},
                "HMS": {"Good": 346, "NI": 0, "Poor": 0},
                "MOJ": {"Good": 1425, "NI": 342, "Poor": 0},
                "GUY.ca": {"Good": 412, "NI": 0, "Poor": 0},
                "GUY.com": {"Good": 1634, "NI": 0, "Poor": 0},
                "MLY": {"Good": 2186, "NI": 138, "Poor": 0},
                "MRR CA": {"Good": 1420, "NI": 0, "Poor": 0},
                "MRR US": {"Good": 1290, "NI": 1298, "Poor": 587},
                "PDS": {"Good": 989, "NI": 0, "Poor": 0},
                "ASV US": {"Good": 1764, "NI": 67, "Poor": 0},
                "ASV CA": {"Good": 274, "NI": 0, "Poor": 0},
                "MDG": {"Good": 1764, "NI": 824, "Poor": 0},
                "PLG": {"Good": 205, "NI": 0, "Poor": 0},
                "MRA CA": {"Good": 288, "NI": 0, "Poor": 0},
                "MRA US": {"Good": 2454, "NI": 400, "Poor": 347},
                "FSP": {"Good": 1548, "NI": 0, "Poor": 0},
                "MRH CA": {"Good": 249, "NI": 0, "Poor": 0},
                "MRH US": {"Good": 4601, "NI": 25, "Poor": 0},
                "LAP": {"Good": 376, "NI": 0, "Poor": 0}
            }
        };

        // Create labels and data arrays
        const labels = [];
        const goodData = [];
        const niData = [];
        const poorData = [];
        const separatorIndices = [];

        let currentIndex = 0;
        Object.keys(brandData).forEach((brand, brandIndex) => {
            const weeks = Object.keys(brandData[brand]);
            
            weeks.forEach(week => {
                labels.push(`${brand} - ${week}`);
                goodData.push(brandData[brand][week].Good);
                niData.push(brandData[brand][week].NI);
                poorData.push(brandData[brand][week].Poor);
                currentIndex++;
            });
            
            // Add separator after each brand (except the last one)
            if (brandIndex < Object.keys(brandData).length - 1) {
                separatorIndices.push(currentIndex - 0.5);
            }
        });

        const ctx = document.getElementById('performanceChart').getContext('2d');
        
        const chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'Good',
                        data: goodData,
                        backgroundColor: '#27ae60',
                        borderWidth: 0
                    },
                    {
                        label: 'NI',
                        data: niData,
                        backgroundColor: '#f39c12',
                        borderWidth: 0
                    },
                    {
                        label: 'Poor',
                        data: poorData,
                        backgroundColor: '#e74c3c',
                        borderWidth: 0
                    }
                ]
            },
            options: {
                indexAxis: 'y', // This makes it horizontal
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false // We have custom legend
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0,0,0,0.8)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        callbacks: {
                            title: function(context) {
                                return context[0].label;
                            },
                            label: function(context) {
                                return `${context.dataset.label}: ${context.raw.toLocaleString()}`;
                            },
                            footer: function(tooltipItems) {
                                let total = 0;
                                tooltipItems.forEach(function(tooltipItem) {
                                    total += tooltipItem.raw;
                                });
                                return 'Total: ' + total.toLocaleString();
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0,0,0,0.1)'
                        },
                        ticks: {
                            callback: function(value) {
                                if (value >= 1000) {
                                    return (value / 1000) + 'k';
                                }
                                return value;
                            }
                        }
                    },
                    y: {
                        stacked: true,
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#2c3e50',
                            font: {
                                size: 11,
                                weight: 'bold'
                            }
                        }
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false
                }
            },
            plugins: [{
                afterDraw: function(chart) {
                    const ctx = chart.ctx;
                    const yAxis = chart.scales.y;
                    
                    // Draw separator lines between brands
                    separatorIndices.forEach(index => {
                        const y = yAxis.getPixelForValue(index);
                        
                        ctx.save();
                        ctx.strokeStyle = '#2c3e50';
                        ctx.lineWidth = 2;
                        ctx.setLineDash([5, 5]);
                        ctx.beginPath();
                        ctx.moveTo(chart.chartArea.left, y);
                        ctx.lineTo(chart.chartArea.right, y);
                        ctx.stroke();
                        ctx.restore();
                    });
                }
            }]
        });
    </script>
</body>
</html>